<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ADMIN</title>

<style>

body{
font-family:Arial;
background:#020617;
color:white;
margin:0;
display:flex;
}

/* SIDEBAR */

.sidebar{
width:230px;
background:#0f172a;
height:100vh;
padding:20px;
}

.sidebar h2{
color:#00ffd5;
}

.sidebar button{
width:100%;
padding:12px;
margin-top:10px;
border:none;
background:#1e293b;
color:white;
cursor:pointer;
border-radius:8px;
}

/* MAIN */

.main{
flex:1;
padding:30px;
}

.card{
background:#0f172a;
padding:20px;
border-radius:10px;
max-width:600px;
}

input{
width:100%;
padding:10px;
margin-top:10px;
border:none;
border-radius:6px;
}

button.add{
background:#00c896;
margin-top:10px;
}

</style>
</head>


<body>

<!-- LOGIN -->

<div id="login" style="margin:auto;text-align:center;">

<h1>ğŸ” Admin Login</h1>

<input id="password" placeholder="Password">

<button onclick="login()">Ø¯Ø®ÙˆÙ„</button>

</div>



<!-- PANEL -->

<div id="panel" style="display:none;width:100%;">

<div class="sidebar">

<h2>TECH STORE</h2>

<button onclick="show('add')">â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</button>
<button onclick="show('products')">ğŸ“¦ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</button>
<button onclick="show('orders')">ğŸ§¾ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</button>
<button onclick="show('coupons')">ğŸ·ï¸ ÙƒÙˆØ¨ÙˆÙ†Ø§Øª</button>

<hr>

<button onclick="goStore()">ğŸª Ø§Ù„Ø°Ù‡Ø§Ø¨ Ù„Ù„Ù…ØªØ¬Ø±</button>

</div>



<div class="main">

<!-- ADD -->
<div id="add" class="card">

<h2>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</h2>

<input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
<input id="price" placeholder="Ø§Ù„Ø³Ø¹Ø±">
<input id="discount" placeholder="Ø®ØµÙ… %">
<input id="stock" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©">
<input id="image" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©">
<input id="desc" placeholder="Ø§Ù„ÙˆØµÙ">

<button class="add" onclick="addProduct()">Ø¥Ø¶Ø§ÙØ©</button>

</div>



<!-- PRODUCTS -->
<div id="products" class="card" style="display:none;">
<h2>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>
<div id="productsList"></div>
</div>



<!-- ORDERS -->
<div id="orders" class="card" style="display:none;">
<h2>Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h2>
<div id="ordersList"></div>
</div>



<!-- COUPONS -->
<div id="coupons" class="card" style="display:none;">

<h2>Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¨ÙˆÙ†</h2>

<input id="code" placeholder="CODE">
<input id="cdiscount" placeholder="Ø§Ù„Ø®ØµÙ… %">

<button onclick="createCoupon()">Ø¥Ù†Ø´Ø§Ø¡</button>

</div>


</div>
</div>



<script>


/* LOGIN */

async function login(){

const password=document.getElementById("password").value;

const res=await fetch("/admin-login",{

method:"POST",
headers:{
"Content-Type":"application/json"
},
body:JSON.stringify({password})

});

const data=await res.json();

if(data.success){

document.getElementById("login").style.display="none";
document.getElementById("panel").style.display="flex";

loadProducts();
loadOrders();

}else{

alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙ„Ø·");

}

}



/* NAV */

function show(id){

["add","products","orders","coupons"].forEach(sec=>{
document.getElementById(sec).style.display="none";
});

document.getElementById(id).style.display="block";

}



/* GO STORE */

function goStore(){
location.href="/";
}



/* ADD PRODUCT */

async function addProduct(){

await fetch("/api/products",{

method:"POST",
headers:{
"Content-Type":"application/json"
},

body:JSON.stringify({

name:name.value,
price:price.value,
discount:discount.value,
stock:stock.value,
image:image.value,
description:desc.value

})

});

alert("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© ğŸ”¥");

loadProducts();

}



/* LOAD PRODUCTS */

async function loadProducts(){

const res=await fetch("/api/products");
const data=await res.json();

const box=document.getElementById("productsList");

box.innerHTML="";

data.forEach(p=>{

box.innerHTML+=`

<div style="background:#020617;padding:10px;margin-top:10px;">
${p.name} - ${p.price} Ø¬Ù†ÙŠÙ‡

<button onclick="deleteProduct(${p.id})">
Ø­Ø°Ù
</button>

</div>

`;

});

}



/* DELETE */

async function deleteProduct(id){

await fetch("/api/products/"+id,{
method:"DELETE"
});

loadProducts();

}



/* LOAD ORDERS */

async function loadOrders(){

const res=await fetch("/api/orders");
const data=await res.json();

const box=document.getElementById("ordersList");

box.innerHTML="";

data.forEach(o=>{

box.innerHTML+=`

<div style="background:#020617;padding:10px;margin-top:10px;">

ğŸ‘¤ ${o.customer.name} <br>
ğŸ“ ${o.customer.phone} <br>
ğŸ“ ${o.customer.address}

</div>

`;

});

}



/* COUPON */

async function createCoupon(){

await fetch("/api/coupons",{

method:"POST",
headers:{
"Content-Type":"application/json"
},

body:JSON.stringify({

code:code.value,
discount:cdiscount.value

})

});

alert("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ† ğŸ”¥");

}

</script>

</body>
  </html>
