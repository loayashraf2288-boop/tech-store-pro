<!DOCTYPE html>
<html lang="ar">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>TECH STORE</title>

<style>

body{
margin:0;
font-family:Arial;
background:#0f1111;
color:white;
}

/* NAV */

.nav{
background:#131921;
padding:20px;
font-size:24px;
font-weight:bold;
}

/* LAYOUT */

.container{
display:grid;
grid-template-columns:1fr 1fr;
gap:40px;
padding:50px;
}

/* IMAGE */

.main-img{
width:100%;
border-radius:15px;
transition:.3s;
cursor:zoom-in;
}

.main-img:hover{
transform:scale(1.05);
}

/* THUMBS */

.thumbs img{
width:70px;
margin:10px;
cursor:pointer;
border-radius:10px;
}

/* PRICE */

.old{
text-decoration:line-through;
color:gray;
}

.new{
color:#00ffae;
font-size:28px;
font-weight:bold;
}

/* BUTTONS */

button{
width:100%;
padding:15px;
border:none;
border-radius:10px;
margin-top:15px;
font-size:18px;
cursor:pointer;
}

.cart{
background:#00ffae;
}

.buy{
background:#ff9900;
}

/* STOCK */

.stock{
margin-top:10px;
color:#00ffae;
}

/* QTY */

.qty button{
width:40px;
}

.review{
background:#161b22;
padding:15px;
border-radius:10px;
margin-top:10px;
}

@media(max-width:900px){

.container{
grid-template-columns:1fr;
}

}

</style>
</head>

<body>

<div class="nav">
ğŸ”¥ TECH STORE
</div>

<div class="container">

<div>

<img id="mainImage" class="main-img">

<div class="thumbs" id="thumbs"></div>

</div>

<div>

<h1 id="name"></h1>

<p id="stock" class="stock"></p>

<div id="price"></div>

<div class="qty">

<button onclick="changeQty(-1)">-</button>
<span id="qty">1</span>
<button onclick="changeQty(1)">+</button>

</div>

<button class="cart" onclick="addToCart()">
Ø§Ø¶Ù Ù„Ù„Ø³Ù„Ø©
</button>

<button class="buy" onclick="buyNow()">
Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù†
</button>

<h2>Ø§Ù„ØªÙØ§ØµÙŠÙ„</h2>
<p id="desc"></p>

<h2>Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª â­â­â­â­â­</h2>

<div class="review">Ù…Ù†ØªØ¬ Ù…Ù…ØªØ§Ø² ğŸ”¥</div>
<div class="review">Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ© Ø¬Ø¯Ø§</div>

</div>

</div>

<script>

let qty=1;

function changeQty(n){
qty+=n;
if(qty<1)qty=1;
document.getElementById("qty").innerText=qty;
}

const id=new URLSearchParams(location.search).get("id");

fetch("/api/products/"+id)
.then(res=>res.json())
.then(p=>{

document.getElementById("name").innerText=p.name;
document.getElementById("desc").innerText=p.description;

document.getElementById("stock").innerText=
"Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: "+p.stock;

const priceAfter=
p.discount>0
? p.price-(p.price*p.discount/100)
: p.price;

document.getElementById("price").innerHTML=`
<span class="old">${p.price}</span>
<span class="new">${priceAfter} Ø¬Ù†ÙŠÙ‡</span>
`;

document.getElementById("mainImage").src=p.images[0];

const thumbs=document.getElementById("thumbs");

p.images.forEach(img=>{

thumbs.innerHTML+=`
<img src="${img}"
onclick="document.getElementById('mainImage').src='${img}'">
`;

});

window.product=p;

});

function addToCart(){

let cart=JSON.parse(localStorage.getItem("cart"))||[];

const exist=cart.find(i=>i.id===product.id);

if(exist){
exist.qty+=qty;
}else{

cart.push({
id:product.id,
name:product.name,
price:product.price,
discount:product.discount,
image:product.images[0],
qty
});

}

localStorage.setItem("cart",JSON.stringify(cart));

alert("ØªÙ…Øª Ø§Ù„Ø§Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø© ğŸ”¥");

}

function buyNow(){

addToCart();

location.href="/cart.html";

}

</script>

</body>
</html>
