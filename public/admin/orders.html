<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Orders</title>

<style>

body{
margin:0;
font-family:Arial;
display:flex;
background:#020617;
color:white;
}

/* sidebar */

.sidebar{
width:230px;
background:#0f172a;
height:100vh;
padding:20px;
}

.sidebar h2{
color:#00ffd5;
}

.sidebar a{
display:block;
margin-top:15px;
color:white;
text-decoration:none;
}

/* main */

.main{
flex:1;
padding:30px;
}

.order{
background:#0f172a;
padding:20px;
border-radius:12px;
margin-bottom:20px;
}

.items{
margin-top:10px;
padding:10px;
background:#020617;
border-radius:8px;
}

.item{
margin-top:5px;
}

</style>
</head>

<body>

<div class="sidebar">

<h2>TECH STORE</h2>

<a href="dashboard.html">ğŸ  Dashboard</a>
<a href="products.html">ğŸ“¦ Products</a>
<a href="add-product.html">â• Add Product</a>
<a href="orders.html">ğŸ§¾ Orders</a>
<a href="coupons.html">ğŸ·ï¸ Coupons</a>

</div>



<div class="main">

<h1>ğŸ§¾ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h1>

<div id="orders"></div>

</div>



<script>

/* Ø­Ù…Ø§ÙŠØ© */
if(!localStorage.getItem("admin")){
location.href="/admin/login.html";
}


/* ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª */

fetch("/api/orders")
.then(res=>res.json())
.then(data=>{

const box=document.getElementById("orders");

if(data.length===0){
box.innerHTML="<h3>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¨Ø¹Ø¯ ğŸ˜„</h3>";
return;
}

data.reverse().forEach(o=>{

let items = JSON.parse(o.items);

let itemsHTML="";

items.forEach(i=>{

itemsHTML+=`
<div class="item">
ğŸ“¦ ${i.name} â€” ${i.price} Ø¬Ù†ÙŠÙ‡
</div>
`;

});

box.innerHTML+=`

<div class="order">

<h3>ğŸ‘¤ ${o.customer}</h3>

<p>ğŸ“ ${o.phone}</p>

<p>ğŸ“ ${o.address}</p>

<div class="items">
${itemsHTML}
</div>

<h3>ğŸ’° Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${o.total} Ø¬Ù†ÙŠÙ‡</h3>

<p>ğŸ•’ ${o.date}</p>

</div>

`;

});

});

</script>

</body>
</html>
