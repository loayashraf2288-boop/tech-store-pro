<!DOCTYPE html>
<html lang="ar">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>TECH STORE</title>

<style>

body{
margin:0;
font-family:Arial;
background:#0b0f17;
color:white;
}

/* NAV */

.nav{
background:#131921;
display:flex;
justify-content:space-between;
align-items:center;
padding:15px 30px;
}

.logo{
font-size:26px;
font-weight:bold;
color:#00ffc3;
}

.search{
width:40%;
padding:10px;
border-radius:8px;
border:none;
}

/* GRID */

.products{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
gap:25px;
padding:40px;
}

/* CARD */

.card{
background:#111927;
padding:15px;
border-radius:15px;
transition:.3s;
cursor:pointer;
}

.card:hover{
transform:translateY(-10px);
box-shadow:0 0 20px #00ffc355;
}

.card img{
width:100%;
height:220px;
object-fit:cover;
border-radius:10px;
}

/* PRICE */

.old{
text-decoration:line-through;
color:gray;
}

.new{
color:#00ffc3;
font-size:20px;
font-weight:bold;
}

/* CART FLOAT */

.cartFloat{
position:fixed;
bottom:25px;
left:25px;
background:#00ffc3;
width:65px;
height:65px;
border-radius:50%;
display:flex;
justify-content:center;
align-items:center;
font-size:28px;
cursor:pointer;
box-shadow:0 0 20px #00ffc388;
}

/* LANG BTN */

.lang{
background:#00ffc3;
border:none;
padding:8px 15px;
border-radius:8px;
cursor:pointer;
}

</style>
</head>

<body>

<div class="nav">

<div class="logo">ðŸ”¥ TECH STORE</div>

<input 
class="search"
placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬..."
oninput="searchProducts(this.value)"
>

<button class="lang" onclick="toggleLang()">
EN
</button>

</div>

<div class="products" id="products"></div>

<div class="cartFloat" onclick="location.href='cart.html'">
ðŸ›’
</div>

<script>

let allProducts=[];
let lang="ar";

/* ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */

fetch("/api/products")
.then(res=>res.json())
.then(data=>{
allProducts=data;
showProducts(data);
});

/* Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */

function showProducts(products){

const box=document.getElementById("products");
box.innerHTML="";

products.forEach(p=>{

const priceAfter=
p.discount>0
? p.price-(p.price*p.discount/100)
: p.price;

box.innerHTML+=`

<div class="card"
onclick="location.href='product.html?id=${p.id}'">

<img src="${p.images[0]}">

<h3>${p.name}</h3>

<div>

<span class="old">${p.price}</span>
<span class="new">${priceAfter} Ø¬Ù†ÙŠÙ‡</span>

</div>

<p>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${p.stock}</p>

</div>
`;

});

}

/* Ø§Ù„Ø¨Ø­Ø« */

function searchProducts(word){

const filtered=allProducts.filter(p=>
p.name.toLowerCase().includes(word.toLowerCase())
);

showProducts(filtered);

}

/* Ø§Ù„Ù„ØºØ© */

function toggleLang(){

if(lang==="ar"){

document.body.dir="ltr";
lang="en";

}else{

document.body.dir="rtl";
lang="ar";

}

}

</script>

</body>
</html>
